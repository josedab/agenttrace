# Kustomize configuration for AgentTrace
#
# Usage:
#   kubectl apply -k deploy/kubernetes/
#
# Or create overlays for different environments:
#   deploy/kubernetes/overlays/production/
#   deploy/kubernetes/overlays/staging/

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: agenttrace

resources:
- namespace.yaml
- configmap.yaml
- postgres.yaml
- clickhouse.yaml
- redis.yaml
- api.yaml
- worker.yaml
- ingress.yaml

# Optional: Enable for production hardening
# - network-policies.yaml
# - hpa.yaml

commonLabels:
  app.kubernetes.io/name: agenttrace
  app.kubernetes.io/version: "1.0.0"
  app.kubernetes.io/managed-by: kustomize

# Image customization
images:
- name: agenttrace/api
  newTag: latest

# Configuration patches for different environments
# Create overlays/production/kustomization.yaml to override these
